<div style="width:100%; height: 440px; background-color: white; display: flex; justify-content: center; align-items: center; position: relative;"
    id="id_wordcloud_1881cc6a-21c4-4d78-8a76-5a4fb711accb">
</div>
<script type="module">
    class WordCloud{constructor({parent=document.body,height=450,width=700,fontFamily='Arial',colorMode=true,maxFontSize=60,minFontSize=10,maxItem=200,backgroundColor='transparent',}){this.parentElement=parent??document.body;this.height=height;this.width=width;this.fontFamily=fontFamily;this.colorMode=colorMode;this.maxFontSize=maxFontSize;this.minFontSize=minFontSize;this.maxItem=maxItem;this.canvas=document.createElement('canvas');this.canvas.height=height;this.canvas.width=width;this.canvas.style.backgroundColor=backgroundColor;this.parentElement.appendChild(this.canvas);this.ctx=this.canvas.getContext('2d');this.wordRects=[];this.mouse={x:0,y:0};this.overlay=document.createElement('div');this.overlay.style.position='absolute';this.overlay.style.top='0';this.overlay.style.left='0';this.overlay.style.backgroundColor='rgba(0,0,0,0.5)';this.overlay.style.zIndex='1000';this.overlay.style.backdropFilter='blur(5px)';this.overlay.style.color='white';this.overlay.style.padding='5px 10px';this.overlay.style.borderRadius='5px';this.overlay.style.display='none';this.parentElement.appendChild(this.overlay);this.canvas.addEventListener('mousemove',(e)=>{const rect=e.target.getBoundingClientRect();const pRect=this.parentElement.getBoundingClientRect();this.mouse.x=e.clientX-rect.left;this.mouse.y=e.clientY-rect.top;const xpos=rect.left-pRect.left+this.mouse.x;const ypos=rect.top-pRect.top+this.mouse.y;const mouseRect={x:this.mouse.x,y:this.mouse.y,width:1,height:1};for(let word of this.wordList){if(word.dontPlace)continue;if(this.intersect(word.rect,mouseRect)){this.overlay.innerHTML=`${word.text}<br/>${word.count}&nbsp;times`;this.overlay.style.top=`${ypos+10}px`;this.overlay.style.left=`${xpos+10}px`;this.overlay.style.display='block';return;}}
this.overlay.style.display='none';});}
generatePackedLayout(words){let sortedWords=words.slice().sort((a,b)=>b.count-a.count);if(sortedWords.length>this.maxItem)sortedWords=sortedWords.slice(0,this.maxItem);const maxCount=sortedWords[0].count;const minCount=sortedWords[sortedWords.length-1].count;const maxFontSize=this.maxFontSize;const minFontSize=this.minFontSize;const fontScale=(maxFontSize-minFontSize)/(maxCount-minCount);sortedWords=sortedWords.map((word)=>{const fontSize=Math.floor(minFontSize+fontScale*(word.count-minCount));return{text:word.text,size:fontSize,count:word.count};});sortedWords.forEach((word)=>{this.ctx.font=`${word.size}px ${this.fontFamily}`;const w=this.ctx.measureText(word.text).width+5;const orientation=Math.random()<0.2&&w<(this.canvas.height*2)/3?'vertical':'horizontal';const width=orientation==='vertical'?word.size:w;const height=orientation==='horizontal'?word.size:w;const position=this.findEmptyPosition(width,height);if(position){word.x=position.x;word.y=position.y+4;word.orientation=orientation;word.rect={x:position.x,y:position.y,width,height};this.wordRects.push(word.rect);}else{word.dontPlace=true;}});this.wordList=sortedWords;}
findEmptyPosition(width,height){const maxAttempts=250;const gridSize=2;for(let attempt=0;attempt<maxAttempts;attempt++){const x=this.getRandomGridPosition(this.canvas.width-width,gridSize);const y=this.getRandomGridPosition(this.canvas.height-height,gridSize);const isPositionEmpty=!this.wordRects.some((rect)=>this.intersect({x,y,width,height},rect));if(isPositionEmpty){return{x,y};}}
return null;}
getRandomGridPosition(max,gridSize,padding=10){return Math.floor(Math.random()*((max-padding)/gridSize))*gridSize+padding;}
intersect(rect1,rect2){return(rect1.x<rect2.x+rect2.width&&rect1.x+rect1.width>rect2.x&&rect1.y<rect2.y+rect2.height&&rect1.y+rect1.height>rect2.y);}
plot({data}){this.generatePackedLayout(data);this.draw();}
draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const colors=['scarlet','green','dodgerblue','black','purple','tomato','deeppink','brown','lightSeaGreen','gray',];this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.font=this.font;this.wordList.forEach((word)=>{if(word.dontPlace)return;if(this.colorMode){const color=colors[Math.floor(Math.random()*colors.length)];this.ctx.fillStyle=color;}
this.ctx.save();this.ctx.translate(word.x,word.y);this.ctx.font=`${word.size}px ${this.font}`;if(word.orientation==='vertical'){this.ctx.rotate(Math.PI/2);this.ctx.textBaseline='alphabetic';}else{this.ctx.textBaseline='hanging';}
this.ctx.fillText(word.text,0,0);this.ctx.restore();});}}
    let data = `[{"text":"The","count":10},{"text":"cosmos","count":27},{"text":"the","count":90},{"text":"vast","count":1},{"text":"expanse","count":4},{"text":"of","count":37},{"text":"unfolds","count":2},{"text":"before","count":2},{"text":"us","count":10},{"text":"revealing","count":1},{"text":"its","count":8},{"text":"cosmic","count":147},{"text":"wonders","count":4},{"text":"In","count":10},{"text":"countless","count":1},{"text":"celestial","count":2},{"text":"bodies","count":1},{"text":"dance","count":4},{"text":"in","count":14},{"text":"a","count":17},{"text":"ballet","count":2},{"text":"symphony","count":2},{"text":"forces","count":2},{"text":"orchestrating","count":1},{"text":"their","count":3},{"text":"Cosmic","count":20},{"text":"marvels","count":2},{"text":"such","count":2},{"text":"as","count":2},{"text":"galaxies","count":2},{"text":"stars","count":2},{"text":"and","count":26},{"text":"planets","count":2},{"text":"adorn","count":1},{"text":"canvas","count":1},{"text":"As","count":4},{"text":"we","count":11},{"text":"gaze","count":1},{"text":"into","count":3},{"text":"find","count":2},{"text":"ourselves","count":2},{"text":"immersed","count":1},{"text":"journey","count":4},{"text":"traversing","count":1},{"text":"highways","count":1},{"text":"space","count":3},{"text":"time","count":4},{"text":"with","count":11},{"text":"brilliance","count":1},{"text":"beckons","count":1},{"text":"to","count":14},{"text":"explore","count":3},{"text":"mysteries","count":2},{"text":"rays","count":1},{"text":"dust","count":1},{"text":"permeate","count":1},{"text":"void","count":1},{"text":"creating","count":2},{"text":"tapestry","count":4},{"text":"that","count":16},{"text":"stretches","count":1},{"text":"across","count":3},{"text":"horizon","count":1},{"text":"this","count":1},{"text":"realm","count":1},{"text":"twinkle","count":1},{"text":"like","count":1},{"text":"gems","count":1},{"text":"casting","count":1},{"text":"glow","count":1},{"text":"upon","count":2},{"text":"landscape","count":1},{"text":"around","count":1},{"text":"suns","count":1},{"text":"is","count":3},{"text":"mesmerizing","count":1},{"text":"spectacle","count":2},{"text":"waltz","count":1},{"text":"plays","count":2},{"text":"out","count":2},{"text":"theater","count":2},{"text":"universe","count":10},{"text":"energies","count":1},{"text":"radiation","count":1},{"text":"frequencies","count":2},{"text":"pulse","count":1},{"text":"through","count":6},{"text":"arteries","count":1},{"text":"beauty","count":2},{"text":"inspires","count":1},{"text":"contemplation","count":1},{"text":"reflection","count":1},{"text":"silence","count":1},{"text":"ponder","count":2},{"text":"questions","count":1},{"text":"echo","count":1},{"text":"corridors","count":1},{"text":"our","count":12},{"text":"minds","count":1},{"text":"theories","count":1},{"text":"hypotheses","count":1},{"text":"emerge","count":1},{"text":"attempting","count":1},{"text":"unravel","count":2},{"text":"enigmas","count":1},{"text":"shroud","count":1},{"text":"mystery","count":1},{"text":"phenomena","count":3},{"text":"both","count":2},{"text":"minuscule","count":1},{"text":"shape","count":1},{"text":"narrative","count":1},{"text":"From","count":1},{"text":"explosions","count":1},{"text":"collisions","count":1},{"text":"arena","count":1},{"text":"where","count":1},{"text":"clash","count":1},{"text":"events","count":1},{"text":"unfold","count":2},{"text":"cycle","count":1},{"text":"birth","count":1},{"text":"death","count":1},{"text":"on","count":3},{"text":"scale","count":1},{"text":"entities","count":2},{"text":"born","count":2},{"text":"extinguished","count":1},{"text":"cycles","count":1},{"text":"expansion","count":1},{"text":"propels","count":1},{"text":"vastness","count":2},{"text":"stretching","count":1},{"text":"fabric","count":2},{"text":"itself","count":2},{"text":"witness","count":1},{"text":"inflation","count":1},{"text":"defies","count":1},{"text":"understanding","count":3},{"text":"distances","count":1},{"text":"measured","count":1},{"text":"light-years","count":1},{"text":"span","count":1},{"text":"reaches","count":1},{"text":"connecting","count":1},{"text":"realms","count":1},{"text":"web","count":1},{"text":"interstellar","count":1},{"text":"threads","count":3},{"text":"an","count":1},{"text":"eternal","count":1},{"text":"river","count":1},{"text":"flows","count":1},{"text":"landscapes","count":1},{"text":"past","count":1},{"text":"present","count":1},{"text":"future","count":1},{"text":"coexist","count":1},{"text":"continuum","count":1},{"text":"epochs","count":3},{"text":"mark","count":1},{"text":"milestones","count":1},{"text":"shaping","count":2},{"text":"define","count":1},{"text":"form","count":1},{"text":"clusters","count":1},{"text":"superclusters","count":1},{"text":"weave","count":1},{"text":"network","count":1},{"text":"binds","count":1},{"text":"together","count":1},{"text":"filaments","count":1},{"text":"dark","count":3},{"text":"matter","count":2},{"text":"sculpt","count":1},{"text":"structure","count":1},{"text":"framework","count":1},{"text":"for","count":2},{"text":"evolution","count":2},{"text":"processes","count":1},{"text":"timeline","count":1},{"text":"destiny","count":1},{"text":"contemplate","count":1},{"text":"awe","count":1},{"text":"grandeur","count":1},{"text":"splendors","count":1},{"text":"captivate","count":1},{"text":"imagination","count":1},{"text":"allure","count":1},{"text":"invites","count":3},{"text":"embark","count":1},{"text":"await","count":1},{"text":"quest","count":1},{"text":"peer","count":1},{"text":"depths","count":1},{"text":"seeking","count":1},{"text":"secrets","count":1},{"text":"lie","count":1},{"text":"hidden","count":1},{"text":"recesses","count":1},{"text":"exploration","count":1},{"text":"whether","count":1},{"text":"telescopes","count":1},{"text":"or","count":1},{"text":"probes","count":1},{"text":"expands","count":1},{"text":"knowledge","count":1},{"text":"deepens","count":1},{"text":"connection","count":2},{"text":"woven","count":1},{"text":"resonates","count":2},{"text":"harmony","count":1},{"text":"patterns","count":1},{"text":"rhythms","count":1},{"text":"symmetries","count":1},{"text":"manifest","count":1},{"text":"design","count":1},{"text":"creation","count":1},{"text":"elements","count":1},{"text":"forge","count":1},{"text":"building","count":1},{"text":"blocks","count":1},{"text":"existence","count":3},{"text":"giving","count":1},{"text":"rise","count":1},{"text":"complexity","count":2},{"text":"constellations","count":2},{"text":"beacons","count":1},{"text":"guide","count":1},{"text":"navigation","count":1},{"text":"night","count":1},{"text":"sky","count":1},{"text":"myths","count":1},{"text":"legends","count":1},{"text":"from","count":1},{"text":"imaginations","count":1},{"text":"ancient","count":1},{"text":"civilizations","count":1},{"text":"paint","count":1},{"text":"tales","count":1},{"text":"heroes","count":1},{"text":"gods","count":1},{"text":"encounter","count":1},{"text":"anomalies","count":1},{"text":"challenge","count":1},{"text":"Black","count":1},{"text":"holes","count":1},{"text":"singularities","count":1},{"text":"defy","count":1},{"text":"comprehension","count":1},{"text":"lurk","count":1},{"text":"shadows","count":1},{"text":"bending","count":1},{"text":"energy","count":1},{"text":"elude","count":1},{"text":"grasp","count":1},{"text":"leaving","count":1},{"text":"nature","count":1},{"text":"unseen","count":1},{"text":"orchestrates","count":1},{"text":"melody","count":1},{"text":"vibrations","count":1},{"text":"waves","count":1},{"text":"signals","count":1},{"text":"traverse","count":1},{"text":"carrying","count":1},{"text":"information","count":1},{"text":"encoded","count":1},{"text":"language","count":1},{"text":"resonance","count":1},{"text":"between","count":1},{"text":"observer","count":1},{"text":"transcends","count":2},{"text":"boundaries","count":1},{"text":"sublime","count":1},{"text":"fill","count":1},{"text":"panorama","count":1},{"text":"life","count":1},{"text":"are","count":1},{"text":"but","count":1},{"text":"actors","count":1},{"text":"playing","count":1},{"text":"roles","count":1},{"text":"stage","count":1},{"text":"embrace","count":2},{"text":"celebrate","count":1},{"text":"essence","count":1},{"text":"unites","count":1},{"text":"reflect","count":1},{"text":"let","count":1},{"text":"marvel","count":1},{"text":"at","count":1},{"text":"every","count":2},{"text":"thread","count":1},{"text":"element","count":1},{"text":"contributes","count":1},{"text":"masterpiece","count":1},{"text":"majesty","count":1},{"text":"discover","count":1},{"text":"legacy","count":1},{"text":"bounds","count":1},{"text":"home","count":1}]`
    data = JSON.parse(data);
    let wordcloud = new WordCloud({
        parent: document.getElementById(`id_wordcloud_1881cc6a-21c4-4d78-8a76-5a4fb711accb`),
        height: 400,
        width: 700,
        fontFamily: 'Helvatica',
        colorMode: true,
        maxFontSize: 150,
        minFontSize: 12,
        maxItem: 400,
    });
    wordcloud.plot({
        data,
    });
</script>